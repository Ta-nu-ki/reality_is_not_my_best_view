<html>
<head>
  <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.0/aframe/build/aframe-ar.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v5.1.0/dist/aframe-extras.min.js"></script>
    <script>
    AFRAME.registerComponent('model-opacity', {
    schema: {default: 1.0},
    init: function () {
      this.el.addEventListener('model-loaded', this.update.bind(this));
    },
    update: function () {
      var mesh = this.el.getObject3D('mesh');
      var data = this.data;
      if (!mesh) { return; }
      mesh.traverse(function (node) {
        if (node.isMesh) {
          node.material.opacity = data;
          node.material.transparent = data < 1.0;
          node.material.needsUpdate = true;
        }
      });
    }
  });
  </script> 
      <!-- Prevent touch causing flicker on iOS. -->
    <style> * { -webkit-tap-highlight-color: rgba(0,0,0,0); } </style> 
</head>
<body>
  <a-scene vr-mode-ui="enabled: false" embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <!-- 
    <a-marker type='pattern' url='https://ta-nu-ki.github.io/reality_is_not_my_best_view/test.patt'>
    -->
    <!-- 
    <a-marker preset='kanji'>
      <a-entity position="0 2 0" scale="10 10 10" rotation="-90 0 0" text="value: HELLO!;color:green"></a-entity>
        <a-animation attribute="position" dur="8000" to="0 -1 -1" repeat="indefinite"></a-animation>
      <a-image src="test.png" position="0 2 0" rotation="-90 0 0"></a-image>
    </a-marker> 
    -->
    <a-marker preset='hiro'>
      <a-entity position="0 0 1" scale="0.75 0.75 0.75" gltf-model="models/skeleton_sitdown.gltf" animation-mixer="clip" shadow="cast: true" model-opacity="0.65" rotation="130 -100 80"></a-entity>
    </a-marker>
    <!-- 
    <a-marker preset='kanji'>
      <a-entity position="0 -1 0" scale="0.5 0.5 0.5" gltf-model="models/cyborg_head.gltf" animation-mixer="clip" shadow="cast: true" model-opacity="0.65" rotation="0 0 0"></a-entity>
    </a-marker>    
    -->
    <a-marker preset='kanji'>
      <a-entity position="0 0 1" scale="0.5 0.5 0.5" gltf-model="models/elemental.gltf" animation-mixer="clip:; duration:10" shadow="cast: true" model-opacity="0.65" rotation="90 180 0">
            <a-animation attribute="position" dur="10000" to="0 5 0" repeat="indefinite"></a-animation>
      </a-entity>
    </a-marker>    
    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
